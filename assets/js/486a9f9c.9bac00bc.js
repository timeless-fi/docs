"use strict";(self.webpackChunkbunni_docs=self.webpackChunkbunni_docs||[]).push([[9233],{3905:(t,e,n)=>{n.d(e,{Zo:()=>c,kt:()=>m});var a=n(7294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var u=a.createContext({}),s=function(t){var e=a.useContext(u),n=e;return t&&(n="function"==typeof t?t(e):l(l({},e),t)),n},c=function(t){var e=s(t.components);return a.createElement(u.Provider,{value:e},t.children)},p={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},d=a.forwardRef((function(t,e){var n=t.components,i=t.mdxType,r=t.originalType,u=t.parentName,c=o(t,["components","mdxType","originalType","parentName"]),d=s(n),m=i,h=d["".concat(u,".").concat(m)]||d[m]||p[m]||r;return n?a.createElement(h,l(l({ref:e},c),{},{components:n})):a.createElement(h,l({ref:e},c))}));function m(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var r=n.length,l=new Array(r);l[0]=d;var o={};for(var u in e)hasOwnProperty.call(e,u)&&(o[u]=e[u]);o.originalType=t,o.mdxType="string"==typeof t?t:i,l[1]=o;for(var s=2;s<r;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2606:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>s});var a=n(7462),i=(n(7294),n(3905));const r={title:"BunniLens",hide_table_of_contents:!0,sidebar_position:1},l="BunniLens",o={unversionedId:"v2/technical/periphery/lens",id:"v2/technical/periphery/lens",title:"BunniLens",description:"BunniLens is a contract that provides view functions for analyzing the state of Bunni pools. It allows users to query additional information about pool liquidity and pricing that is not directly exposed by other contracts.",source:"@site/docs/v2/technical/periphery/lens.md",sourceDirName:"v2/technical/periphery",slug:"/v2/technical/periphery/lens",permalink:"/docs/v2/technical/periphery/lens",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"BunniLens",hide_table_of_contents:!0,sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"AmAmm",permalink:"/docs/v2/technical/core/amamm"},next:{title:"BunniQuoter",permalink:"/docs/v2/technical/periphery/quoter"}},u={},s=[{value:"Immutable parameters",id:"immutable-parameters",level:2},{value:"hub",id:"hub",level:3},{value:"Constructor",id:"constructor",level:2},{value:"Parameters:",id:"parameters",level:4},{value:"Functions",id:"functions",level:2},{value:"getExcessLiquidity",id:"getexcessliquidity",level:3},{value:"Parameters:",id:"parameters-1",level:4},{value:"Return Values:",id:"return-values",level:4},{value:"Usage",id:"usage",level:2}],c={toc:s};function p(t){let{components:e,...n}=t;return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"bunnilens"},"BunniLens"),(0,i.kt)("p",null,"BunniLens is a contract that provides view functions for analyzing the state of Bunni pools. It allows users to query additional information about pool liquidity and pricing that is not directly exposed by other contracts."),(0,i.kt)("h2",{id:"immutable-parameters"},"Immutable parameters"),(0,i.kt)("h3",{id:"hub"},"hub"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"IBunniHub public immutable hub;\n")),(0,i.kt)("p",null,"The address of the BunniHub contract."),(0,i.kt)("h2",{id:"constructor"},"Constructor"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"constructor(IBunniHub hub_)\n")),(0,i.kt)("p",null,"Initializes the BunniLens contract with the address of the BunniHub contract."),(0,i.kt)("h4",{id:"parameters"},"Parameters:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"hub_")),(0,i.kt)("td",{parentName:"tr",align:null},"IBunniHub"),(0,i.kt)("td",{parentName:"tr",align:null},"The address of the BunniHub contract")))),(0,i.kt)("h2",{id:"functions"},"Functions"),(0,i.kt)("h3",{id:"getexcessliquidity"},"getExcessLiquidity"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-solidity"},"function getExcessLiquidity(PoolKey calldata key)\n    external\n    view\n    returns (\n        uint256 excessLiquidity0,\n        uint256 excessLiquidity1,\n        uint256 totalLiquidity\n    )\n")),(0,i.kt)("p",null,"Calculates the excess liquidity and total liquidity for a given pool."),(0,i.kt)("h4",{id:"parameters-1"},"Parameters:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"key")),(0,i.kt)("td",{parentName:"tr",align:null},"struct PoolKey"),(0,i.kt)("td",{parentName:"tr",align:null},"The key of the pool to analyze")))),(0,i.kt)("h4",{id:"return-values"},"Return Values:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"excessLiquidity0")),(0,i.kt)("td",{parentName:"tr",align:null},"uint256"),(0,i.kt)("td",{parentName:"tr",align:null},"The excess liquidity of token0")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"excessLiquidity1")),(0,i.kt)("td",{parentName:"tr",align:null},"uint256"),(0,i.kt)("td",{parentName:"tr",align:null},"The excess liquidity of token1")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"totalLiquidity")),(0,i.kt)("td",{parentName:"tr",align:null},"uint256"),(0,i.kt)("td",{parentName:"tr",align:null},"The total liquidity in the pool")))),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("p",null,"The BunniLens contract provides a way to analyze the state of Bunni pools, particularly focusing on liquidity calculations. Here are some key points about its usage:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"It uses the BunniHub contract to access pool states and other necessary information."),(0,i.kt)("li",{parentName:"ol"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"getExcessLiquidity")," function is the main external function that users can call to get information about a pool's liquidity state."),(0,i.kt)("li",{parentName:"ol"},"It calculates excess liquidity for both tokens in the pool, which represents the amount of liquidity that exceeds what's currently active in the pool based on the current price and liquidity distribution function (LDF)."),(0,i.kt)("li",{parentName:"ol"},"The contract also calculates the total liquidity in the pool, which includes both active and excess liquidity."),(0,i.kt)("li",{parentName:"ol"},"It uses Time-Weighted Average Price (TWAP) for certain calculations when specified in the pool's configuration.")),(0,i.kt)("p",null,"This contract is particularly useful for:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Analyzing the efficiency of liquidity provision in a pool"),(0,i.kt)("li",{parentName:"ul"},"Understanding the distribution of liquidity across different price ranges"),(0,i.kt)("li",{parentName:"ul"},"Helping liquidity providers make informed decisions about their positions")),(0,i.kt)("p",null,"Note that this contract is for view-only operations and does not modify any state."))}p.isMDXComponent=!0}}]);