"use strict";(self.webpackChunkbunni_docs=self.webpackChunkbunni_docs||[]).push([[9308],{3905:(e,t,i)=>{i.d(t,{Zo:()=>c,kt:()=>m});var n=i(7294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var l=n.createContext({}),p=function(e){var t=n.useContext(l),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(i),m=a,f=d["".concat(l,".").concat(m)]||d[m]||u[m]||r;return i?n.createElement(f,o(o({ref:t},c),{},{components:i})):n.createElement(f,o({ref:t},c))}));function m(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=i.length,o=new Array(r);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var p=2;p<r;p++)o[p]=i[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,i)}d.displayName="MDXCreateElement"},7102:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var n=i(7462),a=(i(7294),i(3905));const r={sidebar_position:3},o="Swaps",s={unversionedId:"v2/concepts/swaps",id:"v2/concepts/swaps",title:"Swaps",description:"Swaps are a fundamental operation in any Automated Market Maker (AMM), and Bunni v2 introduces significant improvements to how they are executed. This section will explain the key features and benefits of Bunni v2's swap mechanism.",source:"@site/docs/v2/concepts/swaps.md",sourceDirName:"v2/concepts",slug:"/v2/concepts/swaps",permalink:"/docs/v2/concepts/swaps",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Shapeshifting",permalink:"/docs/v2/concepts/shapeshifting"},next:{title:"Autonomous Rebalancing",permalink:"/docs/v2/concepts/rebalancing"}},l={},p=[{value:"Key Features",id:"key-features",level:2},{value:"How Swaps Work",id:"how-swaps-work",level:2},{value:"Advantages",id:"advantages",level:2},{value:"1. Gas Efficiency",id:"1-gas-efficiency",level:3},{value:"2. Improved Liquidity Utilization",id:"2-improved-liquidity-utilization",level:3},{value:"3. Flexibility",id:"3-flexibility",level:3},{value:"4. Predictable Execution",id:"4-predictable-execution",level:3},{value:"Price Impact and Slippage",id:"price-impact-and-slippage",level:2},{value:"Interaction with Other Bunni v2 Features",id:"interaction-with-other-bunni-v2-features",level:2}],c={toc:p};function u(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"swaps"},"Swaps"),(0,a.kt)("p",null,"Swaps are a fundamental operation in any Automated Market Maker (AMM), and Bunni v2 introduces significant improvements to how they are executed. This section will explain the key features and benefits of Bunni v2's swap mechanism."),(0,a.kt)("h2",{id:"key-features"},"Key Features"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Constant Gas Costs"),": Unlike many other AMMs, the gas cost for swaps in Bunni v2 remains constant regardless of the number of ticks crossed.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Efficient Large Swaps"),": Bunni v2 is particularly efficient for large swaps that cross many ticks, making it attractive for high-volume traders.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Liquidity Density Function (LDF) Integration"),": Swaps in Bunni v2 leverage the power of LDFs to process trades efficiently."))),(0,a.kt)("h2",{id:"how-swaps-work"},"How Swaps Work"),(0,a.kt)("p",null,"At a high level, the swap process in Bunni v2 can be broken down into these steps:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Update Token Reserves"),": The pool's balance of the input token is increased (or the output token decreased, for exact output swaps).")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Compute New Price"),": Using the Inverse Cumulative Amount Function (ICAF), the pool calculates the new price after the swap.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Determine Liquidity Distribution"),": The pool queries the LDF at the new price to determine how liquidity should be distributed.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Calculate Token Amounts"),": Based on the new liquidity distribution, the pool calculates the new balances of both tokens.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Finalize Swap"),": The difference between the initial and final balances determines the actual input and output amounts of the swap."))),(0,a.kt)("h2",{id:"advantages"},"Advantages"),(0,a.kt)("h3",{id:"1-gas-efficiency"},"1. Gas Efficiency"),(0,a.kt)("p",null,"By using LDFs and ICAFs, Bunni v2 can process swaps across multiple ticks in a single operation. This results in constant gas costs, making Bunni v2 particularly efficient for large swaps."),(0,a.kt)("h3",{id:"2-improved-liquidity-utilization"},"2. Improved Liquidity Utilization"),(0,a.kt)("p",null,"The integration with LDFs allows Bunni v2 to make optimal use of the available liquidity based on the current market conditions and liquidity provider preferences."),(0,a.kt)("h3",{id:"3-flexibility"},"3. Flexibility"),(0,a.kt)("p",null,"The swap mechanism in Bunni v2 works seamlessly with other features like shapeshifting and autonomous rebalancing, allowing for more sophisticated liquidity provision strategies."),(0,a.kt)("h3",{id:"4-predictable-execution"},"4. Predictable Execution"),(0,a.kt)("p",null,"The constant gas cost and efficient processing of large swaps make trade execution more predictable, which can be beneficial for traders implementing complex strategies."),(0,a.kt)("h2",{id:"price-impact-and-slippage"},"Price Impact and Slippage"),(0,a.kt)("p",null,"The price impact of a swap in Bunni v2 is determined by the shape of the LDF. Generally:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Pools with more concentrated liquidity around the current price will have lower price impact for small to medium-sized swaps."),(0,a.kt)("li",{parentName:"ul"},"Very large swaps may experience higher slippage if they exhaust the concentrated liquidity.")),(0,a.kt)("p",null,"Traders can estimate price impact before executing a trade by querying the pool's LDF and current state."),(0,a.kt)("h2",{id:"interaction-with-other-bunni-v2-features"},"Interaction with Other Bunni v2 Features"),(0,a.kt)("p",null,"Swaps in Bunni v2 interact seamlessly with other protocol features:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"./shapeshifting"},(0,a.kt)("strong",{parentName:"a"},"Shapeshifting")),": The swap mechanism adapts automatically to changes in the liquidity distribution."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"./rebalancing"},(0,a.kt)("strong",{parentName:"a"},"Autonomous Rebalancing")),": Swaps can trigger rebalancing if they cause the token ratio to deviate significantly from the target."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"./surge"},(0,a.kt)("strong",{parentName:"a"},"Surge Fees")),": During periods of high volatility or after significant liquidity changes, swaps may incur surge fees to protect liquidity providers.")),(0,a.kt)("p",null,"By redesigning how swaps are executed, Bunni v2 offers a more efficient, flexible, and powerful trading experience compared to traditional AMMs. This innovative approach to swaps is a key factor in Bunni v2's ability to provide superior liquidity and trading conditions."))}u.isMDXComponent=!0}}]);